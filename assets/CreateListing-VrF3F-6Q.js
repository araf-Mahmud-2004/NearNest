import{j as e}from"./ui-JykPZCXU.js";import{r as u}from"./vendor-o8UMtg5z.js";import{B as l,I as m}from"./input-Y27Ukfeg.js";import{C as b,b as C,c as w,a as S}from"./card-D3n9XfdJ.js";import{T as L}from"./textarea-DgS_dI9E.js";import{S as D,a as E,b as k,c as I,d as P}from"./select-Dk-cLJJQ.js";import{N as T}from"./Navbar-DN0c9AM8.js";import{u as A,d as B,X as U}from"./index-Xla51Co3.js";import{a as F}from"./router-CRfqy20j.js";import{A as R}from"./arrow-left-BTqSCNGL.js";import{U as G}from"./upload-IU9aHF3c.js";import"./index-BdQq_4o_.js";import"./supabase-DllsxF6L.js";import"./utils-Bsf8JV-l.js";const Z=()=>{const c=F(),{toast:g}=A(),{addListing:h}=B(),[s,x]=u.useState({title:"",description:"",price:"",category:"",location:""}),[n,d]=u.useState([]),f=["Electronics","Furniture","Clothing","Books","Sports","Other"],r=(a,t)=>{x(i=>({...i,[a]:t}))},j=a=>{const t=a.target.files;t&&Array.from(t).forEach(i=>{const o=new FileReader;o.onload=p=>{p.target?.result&&d(v=>[...v,p.target.result])},o.readAsDataURL(i)})},N=a=>{d(t=>t.filter((i,o)=>o!==a))},y=async a=>{if(a.preventDefault(),!s.title||!s.description||!s.price||!s.category){g({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{await h({title:s.title,description:s.description,price:Number(s.price),category:s.category,location:s.location||"Local Area",image:n[0]||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400"}),c("/dashboard")}catch(t){console.error("Error creating listing:",t)}};return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(T,{}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 animate-fade-in",children:[e.jsxs(l,{variant:"ghost",onClick:()=>c(-1),className:"mb-4 hover:bg-gray-100",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Create New Listing"}),e.jsx("p",{className:"text-muted-foreground",children:"Share something with your community"})]}),e.jsxs(b,{className:"border-0 shadow-md animate-fade-in",style:{animationDelay:"0.1s"},children:[e.jsx(C,{children:e.jsx(w,{children:"Listing Details"})}),e.jsx(S,{children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Title *"}),e.jsx(m,{placeholder:"Enter item title",value:s.title,onChange:a=>r("title",a.target.value),className:"transition-all duration-200 focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Price *"}),e.jsx(m,{type:"number",placeholder:"0",value:s.price,onChange:a=>r("price",a.target.value),className:"transition-all duration-200 focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Category *"}),e.jsxs(D,{onValueChange:a=>r("category",a),children:[e.jsx(E,{className:"transition-all duration-200 focus:ring-2 focus:ring-primary",children:e.jsx(k,{placeholder:"Select category"})}),e.jsx(I,{children:f.map(a=>e.jsx(P,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Location"}),e.jsx(m,{placeholder:"Enter location",value:s.location,onChange:a=>r("location",a.target.value),className:"transition-all duration-200 focus:ring-2 focus:ring-primary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description *"}),e.jsx(L,{placeholder:"Describe your item in detail...",value:s.description,onChange:a=>r("description",a.target.value),className:"min-h-32 transition-all duration-200 focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Photos"}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-primary transition-colors duration-200",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:j,className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsx(G,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"Click to upload photos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"PNG, JPG up to 10MB"})]})]}),n.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.map((a,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a,alt:`Upload ${t+1}`,className:"w-full h-24 object-cover rounded-lg"}),e.jsx(l,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 h-6 w-6",onClick:()=>N(t),children:e.jsx(U,{className:"h-3 w-3"})})]},t))})]}),e.jsxs("div",{className:"flex space-x-4 pt-6",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>c(-1),className:"flex-1",children:"Cancel"}),e.jsx(l,{type:"submit",className:"flex-1 bg-primary hover:bg-accent text-primary-foreground",children:"Publish Listing"})]})]})})]})]})]})};export{Z as default};
