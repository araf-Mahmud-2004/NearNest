import{j as e}from"./ui-JykPZCXU.js";import{r as o}from"./vendor-o8UMtg5z.js";import{I as L,B as h}from"./input-Y27Ukfeg.js";import{S as p,a as g,b as f,c as j,d as t}from"./select-Dk-cLJJQ.js";import{N as D,S as V,L as W,e as _,a as A}from"./Navbar-DN0c9AM8.js";import{G as B,P as I}from"./PostCard-_Ags_evD.js";import{a as M}from"./ErrorBoundary-B3hxSvuK.js";import{d as P,u as z}from"./index-Xla51Co3.js";import{a as G}from"./router-CRfqy20j.js";import"./index-BdQq_4o_.js";import"./card-D3n9XfdJ.js";import"./textarea-DgS_dI9E.js";import"./label-B4bWfWXI.js";import"./useMessaging-aOjBx_76.js";import"./timeUtils-B3Mv27P7.js";import"./utils-Bsf8JV-l.js";import"./map-pin-DS8IMhAL.js";import"./clock-BM4GInVb.js";import"./eye-DKcQtfPS.js";import"./supabase-DllsxF6L.js";const oe=()=>{const{events:y,loading:d,deleteEvent:v}=P();z();const N=G(),[n,w]=o.useState(""),[c,b]=o.useState("all"),[m,C]=o.useState("all"),[u,x]=o.useState("grid"),S=["all","Community Service","Market","Education","Social","Workshop","Fitness"],k=s=>{N(`/edit-event/${s}`)},T=async s=>{window.confirm("Are you sure you want to delete this event?")&&await v(s)},i=y.filter(s=>{try{const l=s.title.toLowerCase().includes(n.toLowerCase())||s.description.toLowerCase().includes(n.toLowerCase()),E=c==="all"||s.category===c;let r=!0;if(m!=="all"){const a=s.date?.toLowerCase()||"";switch(m){case"today":r=a.includes("today");break;case"tomorrow":r=a.includes("tomorrow");break;case"this-week":r=a.includes("today")||a.includes("tomorrow")||a.includes("monday")||a.includes("tuesday")||a.includes("wednesday")||a.includes("thursday")||a.includes("friday")||a.includes("saturday")||a.includes("sunday");break;default:r=!0}}return l&&E&&r}catch(l){return console.error("Error filtering event:",l),!1}});return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(D,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Community Events"}),e.jsx("p",{className:"text-muted-foreground",children:"Discover what's happening in your neighborhood"})]}),e.jsx("div",{className:"bg-card rounded-lg shadow-sm border border-border p-6 mb-8 animate-fade-in",style:{animationDelay:"0.1s"},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(L,{placeholder:"Search events...",value:n,onChange:s=>w(s.target.value),className:"pl-10"})]}),e.jsxs(p,{value:c,onValueChange:b,children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Category"})}),e.jsx(j,{children:S.map(s=>e.jsx(t,{value:s,children:s==="all"?"All Categories":s},s))})]}),e.jsxs(p,{value:m,onValueChange:C,children:[e.jsx(g,{children:e.jsx(f,{placeholder:"When"})}),e.jsxs(j,{children:[e.jsx(t,{value:"all",children:"All Time"}),e.jsx(t,{value:"today",children:"Today"}),e.jsx(t,{value:"tomorrow",children:"Tomorrow"}),e.jsx(t,{value:"this-week",children:"This Week"}),e.jsx(t,{value:"next-week",children:"Next Week"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(h,{variant:u==="grid"?"default":"outline",size:"sm",onClick:()=>x("grid"),className:"flex-1 transition-all duration-200",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx(h,{variant:u==="list"?"default":"outline",size:"sm",onClick:()=>x("list"),className:"flex-1 transition-all duration-200",children:e.jsx(W,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"mb-6 animate-fade-in",style:{animationDelay:"0.2s"},children:e.jsxs("p",{className:"text-muted-foreground",children:[i.length," event",i.length!==1?"s":""," found"]})}),d&&e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(_,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading events..."})]}),!d&&e.jsx("div",{className:`animate-fade-in transition-all duration-300 ${u==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"}`,style:{animationDelay:"0.3s"},children:i.map((s,l)=>e.jsx(M,{fallback:e.jsx("div",{className:"p-4 border rounded-lg bg-muted/50",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Unable to load this event"})}),children:e.jsx(I,{id:s.id,title:s.title,description:s.description,location:s.location,category:s.category,image:s.image,date:s.date,time:s.time,created_at:s.created_at,user_id:s.user_id,profiles:s.profiles,onEdit:k,onDelete:T,type:"event"})},s.id))}),i.length===0&&!d&&e.jsxs("div",{className:"text-center py-12 animate-fade-in",style:{animationDelay:"0.3s"},children:[e.jsx("div",{className:"text-muted-foreground mb-4",children:e.jsx(A,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No events found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search criteria"})]})]})]})};export{oe as default};
