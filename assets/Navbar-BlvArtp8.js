import{j as e,w as $,x as B,y as F,O as V,z as Z,E as ue,T as J,G as X,H as he,J as fe,K as pe,L as Y,M as G,N as ge,Q as K,U as Q,V as W,W as ee,X as se,Y as ae,Z as te,_ as je,$ as Ne}from"./ui-JykPZCXU.js";import{r as o}from"./vendor-o8UMtg5z.js";import{B as i,I as T}from"./input-CIthbtd8.js";import{a as re,L as g}from"./router-DZ6VJzti.js";import{c as x,a as d,g as ye,X as D,s as y,b as z}from"./index-DFAoHlto.js";import{C as ne,a as ie}from"./card-nPJQNN0C.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=x("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=x("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=x("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=x("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=x("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=x("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=x("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=x("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=x("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=x("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=x("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=x("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=x("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=x("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=x("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Re=ye("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function S({className:s,variant:a,...t}){return e.jsx("div",{className:d(Re({variant:a}),s),...t})}const _=o.forwardRef(({className:s,...a},t)=>e.jsx($,{ref:t,className:d("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a}));_.displayName=$.displayName;const L=o.forwardRef(({className:s,...a},t)=>e.jsx(B,{ref:t,className:d("aspect-square h-full w-full",s),...a}));L.displayName=B.displayName;const A=o.forwardRef(({className:s,...a},t)=>e.jsx(F,{ref:t,className:d("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a}));A.displayName=F.displayName;const ze=he,De=pe,Se=fe,oe=o.forwardRef(({className:s,...a},t)=>e.jsx(V,{ref:t,className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));oe.displayName=V.displayName;const le=o.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(Se,{children:[e.jsx(oe,{}),e.jsxs(Z,{ref:n,className:d("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(ue,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));le.displayName=Z.displayName;const ce=({className:s,...a})=>e.jsx("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});ce.displayName="DialogHeader";const _e=({className:s,...a})=>e.jsx("div",{className:d("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});_e.displayName="DialogFooter";const de=o.forwardRef(({className:s,...a},t)=>e.jsx(J,{ref:t,className:d("text-lg font-semibold leading-none tracking-tight",s),...a}));de.displayName=J.displayName;const Le=o.forwardRef(({className:s,...a},t)=>e.jsx(X,{ref:t,className:d("text-sm text-muted-foreground",s),...a}));Le.displayName=X.displayName;const Ae=({profile:s,postTitle:a,postType:t,children:n})=>{const l=s.full_name||s.username,h=s.username,m=()=>{alert(`Contact feature coming soon! You can reach out to ${l} about your ${t}.`)};return e.jsxs(ze,{children:[e.jsx(De,{asChild:!0,children:n}),e.jsxs(le,{className:"sm:max-w-md",children:[e.jsx(ce,{children:e.jsx(de,{children:"Interested Person"})}),e.jsx(ne,{className:"border-0 shadow-none",children:e.jsx(ie,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs(_,{className:"h-20 w-20",children:[e.jsx(L,{src:s.avatar_url||void 0}),e.jsx(A,{className:"text-lg",children:l.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:l}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",h]}),s.bio&&e.jsx("p",{className:"text-sm text-center max-w-xs",children:s.bio}),s.location&&e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-muted-foreground",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{children:s.location})]})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg w-full",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Interested in your ",t,":"]}),e.jsxs("p",{className:"font-medium text-sm mt-1",children:['"',a,'"']})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsxs(i,{onClick:m,className:"flex-1 flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Contact"]}),e.jsxs(i,{variant:"outline",onClick:()=>{window.location.href=`/profile/${s.id}`},className:"flex-1 flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"View Profile"]})]}),e.jsx("div",{className:"text-center",children:e.jsx(S,{variant:"secondary",className:"text-xs",children:"Community Member"})})]})})})]})]})},v={async getUserNotifications(s){const{data:a,error:t}=await y.from("notifications").select("*").eq("user_id",s).order("created_at",{ascending:!1});return a?{data:await Promise.all(a.map(async l=>{if(l.data?.interested_user_id){const{data:h}=await y.from("profiles").select("id, username, full_name, avatar_url").eq("id",l.data.interested_user_id).single();return{...l,interested_user_profile:h}}return l})),error:t}:{data:a,error:t}},async getUnreadCount(s){const{count:a,error:t}=await y.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",s).eq("read",!1);return{count:a,error:t}},async markAsRead(s){const{data:a,error:t}=await y.from("notifications").update({read:!0}).eq("id",s).select().single();return{data:a,error:t}},async markAllAsRead(s){const{data:a,error:t}=await y.from("notifications").update({read:!0}).eq("user_id",s).eq("read",!1);return{data:a,error:t}},async deleteNotification(s){const{error:a}=await y.from("notifications").delete().eq("id",s);return{error:a}},async createNotification(s){const{data:a,error:t}=await y.from("notifications").insert(s).select().single();return{data:a,error:t}},subscribeToNotifications(s,a){return y.channel("notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${s}`},a).subscribe()}},Ie=()=>{const[s,a]=o.useState([]),[t,n]=o.useState(0),[l,h]=o.useState(!0),{user:m}=z();return o.useEffect(()=>{(async()=>{if(!m){a([]),n(0),h(!1);return}try{const[c,r]=await Promise.all([v.getUserNotifications(m.id),v.getUnreadCount(m.id)]);c.data&&a(c.data),r.count!==null&&n(r.count)}catch(c){console.error("Error loading notifications:",c)}finally{h(!1)}})()},[m]),o.useEffect(()=>{if(!m)return;const u=v.subscribeToNotifications(m.id,c=>{c.eventType==="INSERT"?(a(r=>[c.new,...r]),n(r=>r+1)):c.eventType==="UPDATE"?(a(r=>r.map(f=>f.id===c.new.id?c.new:f)),c.old.read===!1&&c.new.read===!0&&n(r=>Math.max(0,r-1))):c.eventType==="DELETE"&&(a(r=>r.filter(f=>f.id!==c.old.id)),c.old.read||n(r=>Math.max(0,r-1)))});return()=>{u.unsubscribe()}},[m]),{notifications:s,unreadCount:t,loading:l,markAsRead:async u=>{try{await v.markAsRead(u)}catch(c){console.error("Error marking notification as read:",c)}},markAllAsRead:async()=>{if(m)try{await v.markAllAsRead(m.id),n(0)}catch(u){console.error("Error marking all notifications as read:",u)}},deleteNotification:async u=>{try{await v.deleteNotification(u)}catch(c){console.error("Error deleting notification:",c)}}}},Te=()=>{const{user:s}=z(),[a,t]=o.useState(!1),{notifications:n,unreadCount:l,loading:h,markAsRead:m,markAllAsRead:j,deleteNotification:w}=Ie();if(!s)return null;const b=r=>{const f=new Date,p=new Date(r),N=Math.floor((f.getTime()-p.getTime())/(1e3*60));if(N<1)return"Just now";if(N<60)return`${N}m ago`;const I=Math.floor(N/60);return I<24?`${I}h ago`:p.toLocaleDateString()},u=r=>{switch(r){case"interest":return e.jsx(ke,{className:"h-4 w-4 text-red-500"});case"event":return e.jsx(k,{className:"h-4 w-4 text-blue-500"});case"listing":return e.jsx(Me,{className:"h-4 w-4 text-green-500"});default:return e.jsx(E,{className:"h-4 w-4 text-gray-500"})}},c=async r=>{if(r.read||await m(r.id),r.data?.post_id){const f=r.data.post_type;f==="event"?window.location.href="/events":f==="listing"&&(window.location.href="/listings")}};return e.jsxs("div",{className:"relative",children:[e.jsxs(i,{variant:"ghost",size:"icon",onClick:()=>t(!a),className:"relative",children:[e.jsx(E,{className:"h-5 w-5"}),l>0&&e.jsx(S,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:l>9?"9+":l})]}),a&&e.jsx(ne,{className:"absolute right-0 top-12 w-80 max-h-96 overflow-y-auto z-50 shadow-lg",children:e.jsxs(ie,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsxs("div",{className:"flex gap-2",children:[l>0&&e.jsx(i,{variant:"ghost",size:"sm",onClick:j,className:"text-xs",disabled:h,children:h?e.jsx(q,{className:"h-3 w-3 animate-spin"}):"Mark all read"}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"h-6 w-6",children:e.jsx(D,{className:"h-4 w-4"})})]})]}),h?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(q,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading..."})]}):n.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notifications yet"}):e.jsx("div",{className:"space-y-2",children:n.slice(0,10).map(r=>{const f=r.type==="interest",p=r.interested_user_profile;return e.jsx("div",{className:`p-3 rounded-lg border transition-colors group ${r.read?"bg-muted/50 border-muted":"bg-background border-primary/20 hover:bg-muted/30"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u(r.type),e.jsx(S,{variant:"secondary",className:"text-xs",children:r.type==="interest"?"Interest":r.type==="event"?"Event":r.type==="listing"?"Listing":r.type}),!r.read&&e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})]}),f&&p&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(_,{className:"h-8 w-8",children:[e.jsx(L,{src:p.avatar_url||void 0}),e.jsx(A,{className:"text-xs",children:(p.full_name||p.username).charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:p.full_name||p.username}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["@",p.username]})]}),e.jsx(Ae,{profile:p,postTitle:r.data?.post_title||"your post",postType:r.data?.post_type||"listing",children:e.jsxs(i,{variant:"outline",size:"sm",className:"text-xs",onClick:N=>{N.stopPropagation(),r.read||m(r.id)},children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),"View"]})})]}),e.jsx("p",{className:"font-medium text-sm",children:r.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b(r.created_at)}),!f&&e.jsx("div",{className:"mt-2",children:e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>c(r),className:"text-xs",children:"View Details"})})]}),e.jsx(i,{variant:"ghost",size:"icon",onClick:N=>{N.stopPropagation(),w(r.id)},className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(D,{className:"h-3 w-3"})})]})},r.id)})})]})})]})},Ee=()=>{const{user:s}=z(),a=re();if(!s)return null;const t=()=>{a("/messages")};return e.jsx(i,{variant:"ghost",size:"icon",onClick:t,className:"relative",title:"Messages",children:e.jsx(R,{className:"h-5 w-5"})})},Pe=je,qe=Ne,Ue=o.forwardRef(({className:s,inset:a,children:t,...n},l)=>e.jsxs(Y,{ref:l,className:d("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",s),...n,children:[t,e.jsx(we,{className:"ml-auto h-4 w-4"})]}));Ue.displayName=Y.displayName;const He=o.forwardRef(({className:s,...a},t)=>e.jsx(G,{ref:t,className:d("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));He.displayName=G.displayName;const me=o.forwardRef(({className:s,sideOffset:a=4,...t},n)=>e.jsx(ge,{children:e.jsx(K,{ref:n,sideOffset:a,className:d("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t})}));me.displayName=K.displayName;const C=o.forwardRef(({className:s,inset:a,...t},n)=>e.jsx(Q,{ref:n,className:d("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",s),...t}));C.displayName=Q.displayName;const Oe=o.forwardRef(({className:s,children:a,checked:t,...n},l)=>e.jsxs(W,{ref:l,className:d("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:t,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ee,{children:e.jsx(ve,{className:"h-4 w-4"})})}),a]}));Oe.displayName=W.displayName;const $e=o.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(se,{ref:n,className:d("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ee,{children:e.jsx(be,{className:"h-2 w-2 fill-current"})})}),a]}));$e.displayName=se.displayName;const Be=o.forwardRef(({className:s,inset:a,...t},n)=>e.jsx(ae,{ref:n,className:d("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...t}));Be.displayName=ae.displayName;const xe=o.forwardRef(({className:s,...a},t)=>e.jsx(te,{ref:t,className:d("-mx-1 my-1 h-px bg-muted",s),...a}));xe.displayName=te.displayName;const Ge=()=>{const[s,a]=o.useState(!1),{user:t,username:n,profile:l,signOut:h,profileLoading:m}=z(),j=re(),w=async()=>{await h(),j("/")},b=()=>{j("/create-listing")},u=()=>{j("/create-event")};return e.jsx("nav",{className:"bg-background border-b border-border sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(g,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:"N"})}),e.jsx("span",{className:"text-xl font-bold text-foreground",children:"NearNest"})]}),t&&e.jsx("div",{className:"hidden md:flex flex-1 max-w-lg mx-8",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(T,{placeholder:"Search for items, events, or services...",className:"pl-10 pr-4 py-2 w-full bg-card text-card-foreground"})]})}),e.jsx("div",{className:"hidden md:flex items-center space-x-4",children:t?e.jsxs(e.Fragment,{children:[e.jsx(g,{to:"/listings",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-primary",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Listings"]})}),e.jsx(g,{to:"/events",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-primary",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Events"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(i,{className:"bg-primary hover:bg-accent text-primary-foreground",onClick:b,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Post"]}),e.jsxs(i,{variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-primary-foreground",onClick:u,children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Event"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{}),e.jsx(Te,{})]}),e.jsxs(Pe,{children:[e.jsx(qe,{asChild:!0,children:e.jsxs(i,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden lg:inline",children:m?"Loading...":n||l?.full_name||t.email?.split("@")[0]})]})}),e.jsxs(me,{align:"end",className:"w-56 bg-card text-card-foreground",children:[e.jsxs(C,{onClick:()=>j("/profile"),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(C,{onClick:()=>j("/messages"),children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Messages"})]}),e.jsx(C,{children:e.jsx(g,{to:"/settings",children:e.jsx(i,{variant:"ghost",className:"w-full justify-start text-foreground",children:"Settings"})})}),e.jsx(xe,{}),e.jsxs(C,{onClick:w,children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Sign out"})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{to:"/auth",children:e.jsx(i,{variant:"ghost",className:"text-foreground",children:"Login"})}),e.jsx(g,{to:"/auth",children:e.jsx(i,{className:"bg-primary hover:bg-accent text-primary-foreground",children:"Sign Up"})})]})}),e.jsx("div",{className:"md:hidden",children:e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>a(!s),children:e.jsx(Ce,{className:"h-5 w-5"})})})]}),t&&e.jsx("div",{className:"md:hidden pb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(T,{placeholder:"Search...",className:"pl-10 pr-4 py-2 w-full bg-card text-card-foreground"})]})}),s&&e.jsx("div",{className:"md:hidden pb-3 border-t border-border pt-3",children:e.jsx("div",{className:"flex flex-col space-y-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx(g,{to:"/listings",children:e.jsxs(i,{variant:"ghost",className:"w-full justify-start text-muted-foreground hover:text-primary",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Listings"]})}),e.jsx(g,{to:"/events",children:e.jsxs(i,{variant:"ghost",className:"w-full justify-start text-muted-foreground hover:text-primary",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Events"]})}),e.jsx(g,{to:"/messages",children:e.jsxs(i,{variant:"ghost",className:"w-full justify-start text-muted-foreground hover:text-primary",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Messages"]})}),e.jsxs(i,{className:"bg-primary hover:bg-accent text-primary-foreground justify-start",onClick:b,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Post Listing"]}),e.jsxs(i,{variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-primary-foreground justify-start",onClick:u,children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Create Event"]}),e.jsxs(i,{onClick:w,variant:"ghost",className:"w-full justify-start text-muted-foreground hover:text-primary",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{to:"/auth",children:e.jsx(i,{variant:"ghost",className:"w-full justify-start text-foreground",children:"Login"})}),e.jsx(g,{to:"/auth",children:e.jsx(i,{className:"bg-primary hover:bg-accent text-primary-foreground justify-start",children:"Sign Up"})})]})})})]})})};export{_ as A,S as B,ve as C,ze as D,ke as H,Ae as I,P as L,R as M,Ge as N,H as P,O as S,M as U,k as a,L as b,A as c,E as d,q as e,De as f,le as g,ce as h,de as i,Le as j,_e as k,Pe as l,qe as m,v as n,me as o,C as p};
